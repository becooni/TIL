# Network Basic

# HTTP - GET, POST

- HTTP 프로토콜을 이용해서 서버에 요청할 때 사용하는 방식

## GET

- HTTP Request Message의 `Header` 부분의 Url에 데이터를 담아서 전송
- Url 끝에 `?` 뒤에 데이터를 붙여 Request를 보냄
- 데이터의 크기가 제한적이며 보안이 취약
- 캐싱되었던 데이터가 응답될 가능성이 있음

## POST

- HTTP Request Message의 `Body` 부분의 데이터를 담아서 전송
- Binary 데이터를 요청하거나 데이터 크기의 제한이 비교적 자유롭다

# TCP 3-way Handshake

![image](https://user-images.githubusercontent.com/5853404/110327315-253cfd80-805d-11eb-9cdd-93069825886d.png)

# TCP, UDP

## UDP - User Datagram Protocol

- 비연결형 프로토콜
- IP 데이터그램을 캡슐화하여 보내는 방법
- 연결 설정을 하지 않고 보내는 방법
- 흐름제어, 오류제어 또는 손상된 세그먼트의 수신에 대한 재전송을 하지 않음 -> 사용자 프로세스의 몫
- 요청 또는 응답이 손실되면 Client는 Timeout 되고 다시 시도 할 수 있으면 됨
- 코드가 간단하고 TCP처럼 초기설정이 요구되는 프로토콜보다 적은 메세지

DNS는 UDP를 사용
1.  IP주소를 찾기 위해 DNS 서버로 호스트 네임을 포함한 UDP 패킷으로 '요청'
2. DNS 서버는 호스트의 IP 주소를 포함한 UDP 패킷으로 '응답'
3. 사전 설정이 필요하지 않고, 응답후 해제가 필요하지 않음

## TCP - Transmission Control Protocol

- 네트워크 통신의 '신뢰성'과 '순차적인 전달'을 위해 만들어짐
- '신뢰성이 없는 인터넷'을 통해 종단간에 신뢰성 있는 **바이트 스트림을 전송** 하도록 특별히 설계함
- 송/수신자 모두 소켓이라고 부르는 종단점을 생성함
- 연결 설정은 `3-Way-Handshake`를 통해 행해짐
- 전이중(Full-Duplex) -> 양방향으로 동시에 요청이 일어남
- 점대점(Point to Point) -> 각 연결이 정확히 2개의 종단정믈 가지고 있음
- 멀티캐스팅, 브로드캐스팅을 지원하지 않음

# HTTP, HTTPS

## HTTP의 문제점

- 평문 통신이기 때문에 '도청' 가능
- 통신 상대를 확인하지 않기 때문에 '위장' 가능
- 완전성을 증명할 수 없기 떄문에 '변조' 가능

*다른 암호화하지 않은 프로토콜에도 공통되는 문제점*

### TCP/IP는 '도청' 가능한 네트워크

- 패킷을 수집하여 도청
- 평문으로 통신할 경우 메세지의 의미 파악 쉬움 -> 암호화 해야함

보완 방법

1. 통신 자체를 암호화 `SSL(Secure Sockey Layer)` or `TLS(Transport Layer Security)`라는 다른 프로토콜을 조합하여 HTTP 통신 내용을 암호화
    - `SSL`을 조합 -> `HTTPS(HTTP Secure)` or `HTTP over SSL`
2. 콘텐츠를 암호화

### 통신 상대를 확인하지 하지 않아 '위장' 가능

HTTP에 의한 통신은 상대가 누구인지 확인하는 처리가 없기 때문에 누구든지 Request할 수 있음. IP 주소나 포트 등에서 그 웹 서버에 액세스 제한이 없는 경우 Request가 오면 무조건 Response함

1. Response가 정확한 웹 서버 인지 확인 불가
2. Request가 정확한 클라이언트가 보낸 것 인지 확인 불가
3. 접근이 허가된 상대인지 확인 불가
4. 어디에서 누가 Request했는지 확인 불가
5. 의미없는 Request에도 수신 -> DoS 공격

보완 방법

- SSL -> 상대를 확인하는 수단이고 제 3자 기관에 의해 발행되는 '증명서'

### 완전성을 증멸할 수 없기 때문에 '변조'가 가능

완전성 -> 정보의 정확성. 서버 또는 클라이언트에서 수신한 내용이 송신측에서 보낸 내용과 일치한다는 보장이 없음. Request ~ Response 사이에 누군가 변조하더라도 사실 확인 불가함. 이를 중간자 공격(Main-in-the-Middle)이라고 함

보완 방법

- `MD5`, `SHA-1` 등의 해시 값을 확인하는 방법
- 파일의 디지털 서명을 확인하는 방법
- 위 방법 모두 확실한 것은 아님
- `HTTPS`를 사용하여 인증, 암호화, 다이제스트 기능 제공함으로써 확실한 보완

## HTTPS

> HTTP에 암호화, 인증, 완정성 보호를 더한 HTTPS

- HTTP 통신하는 소켓 부분을 `SSL` or `TLS` 라는 프로토콜로 대체하는 것
- `HTTP` <-> `SSL` <-> `TCP`

### 모든 웹페이지에서 HTTPS를 사용하지 않는 이유

*평문 통신에 비해 암호화 통신은 CPU, 메모리 등 리소스를 많이 필요로함*라고 했으나 현대의 HTTP 2.0가 발전하면서 HTTPS가 더 빠름